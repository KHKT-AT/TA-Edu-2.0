<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TA-Edu ‚Ä¢ Dashboard</title>

  <!-- Font & icon -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

  <!-- Styles -->
  <link rel="stylesheet" href="css/taedu_global.css" />
  <link rel="stylesheet" href="css/dashboard.css" />
  <link rel="stylesheet" href="./css/css_menu.css">
</head>
<body>
  <!-- Header s·∫Ω ƒë∆∞·ª£c boot_header.js ch√®n v√†o -->

  <main class="dash container">
    <!-- Sidebar -->
    <aside class="dash__sidebar" id="dashSidebar" aria-label="Thanh ƒëi·ªÅu h∆∞·ªõng Dashboard">
      <div class="user-card">
        <img id="dashAvatar" class="user-card__avatar" src="assets/default_avatar.svg" alt="Avatar">
        <div class="user-card__meta">
          <div id="dashName" class="user-card__name">Ng∆∞·ªùi d√πng</div>
          <div id="dashRole" class="user-card__role badge">H·ªçc sinh</div>
          <div id="dashEmail" class="user-card__email">email@example.com</div>
        </div>
      </div>

      <nav class="dash__nav" role="tablist" aria-label="M·ª•c ch√≠nh">
        <a href="#tab=profile"  class="nav-item" data-tab="profile"><i class="fa-regular fa-id-card"></i> <span>H·ªì s∆°</span></a>
        <a href="#tab=courses"  class="nav-item" data-tab="courses"><i class="fa-solid fa-book"></i> <span>Kho√° h·ªçc</span></a>
        <a href="#tab=progress" class="nav-item" data-tab="progress"><i class="fa-solid fa-chart-line"></i> <span>Ti·∫øn ƒë·ªô</span></a>
        <a href="#tab=wallet"   class="nav-item" data-tab="wallet"><i class="fa-solid fa-wallet"></i> <span>V√≠</span></a>
        <a href="#tab=settings" class="nav-item" data-tab="settings"><i class="fa-solid fa-gear"></i> <span>C√†i ƒë·∫∑t</span></a>
      </nav>

      <button id="dashLogout" class="btn-logout"><i class="fa-solid fa-right-from-bracket"></i> ƒêƒÉng xu·∫•t</button>
    </aside>

    <!-- Content -->
    <section class="dash__content" id="dashContent">
      <!-- PROFILE -->
      <article id="tab-profile" class="panel is-active" role="tabpanel" aria-labelledby="tab-profile" tabindex="0">
        <header class="panel__head">
          <h2>H·ªì s∆°</h2>
          <!-- KYC/Role status banner -->
          <div id="verifyBanner" class="notice" role="status" aria-live="polite" hidden>
            <div class="notice__icon">üõ°Ô∏è</div>
            <div class="notice__body">
              <h3 class="notice__title">Tr·∫°ng th√°i t√†i kho·∫£n</h3>
              <p class="notice__text" id="verifyText">ƒêang t·∫£i‚Ä¶</p>
              <div class="notice__actions">
                <a id="verifyPrimary" class="btn btn--primary" href="#" hidden>B·∫Øt ƒë·∫ßu</a>
                <button id="verifyDismiss" class="btn btn--ghost" type="button" hidden>·∫®n</button>
              </div>
            </div>
          </div>

        </header>
        <div class="profile__wrap">
          <img id="profileAvatar" class="profile__avatar" src="assets/default_avatar.svg" alt="Avatar">
          <div class="profile__info">
            <p><strong>T√™n: </strong><span id="profileName">Ng∆∞·ªùi d√πng</span></p>
            <p><strong>Email: </strong><span id="profileEmail">email@example.com</span></p>
            <p><strong>Vai tr√≤: </strong><span id="profileRole">H·ªçc sinh</span></p>
          </div>
        </div>
      </article>

      <!-- COURSES -->
      <article id="tab-courses" class="panel" role="tabpanel" aria-labelledby="tab-courses" tabindex="0">
        <header class="panel__head">
          <h2>Kho√° h·ªçc</h2>
        </header>
        <p>Danh s√°ch kho√° h·ªçc c·ªßa b·∫°n s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y.</p>
        <div class="empty">
          <i class="fa-solid fa-book-open"></i>
          <p>Ch∆∞a c√≥ kho√° h·ªçc n√†o. <a href="mon/lythuyet.html">B·∫Øt ƒë·∫ßu h·ªçc l√Ω thuy·∫øt</a></p>
        </div>
      </article>

      <!-- PROGRESS -->
      <article id="tab-progress" class="panel" role="tabpanel" aria-labelledby="tab-progress" tabindex="0">
        <header class="panel__head">
          <h2>Ti·∫øn ƒë·ªô</h2>
        </header>
        <div class="progress__card">
          <div class="progress__row">
            <span>V·∫≠t l√Ω</span>
            <div class="bar"><div id="barPhysics" class="bar__fill" style="width:40%"></div></div>
            <span id="pctPhysics" class="pct">40%</span>
          </div>
          <div class="progress__row">
            <span>Ho√° h·ªçc</span>
            <div class="bar"><div id="barChem" class="bar__fill" style="width:20%"></div></div>
            <span id="pctChem" class="pct">20%</span>
          </div>
          <div class="progress__row">
            <span>To√°n</span>
            <div class="bar"><div id="barMath" class="bar__fill" style="width:65%"></div></div>
            <span id="pctMath" class="pct">65%</span>
          </div>
        </div>
      </article>

      <!-- WALLET -->
      <article id="tab-wallet" class="panel" role="tabpanel" aria-labelledby="tab-wallet" tabindex="0">
        <header class="panel__head">
          <h2>V√≠ c·ªßa t√¥i</h2>
        </header>

        <div class="panel__body wallet">
          <!-- T·ªïng quan s·ªë d∆∞ -->
          <section class="wallet__summary card">
            <div class="wallet__summary-row">
              <div>
                <div class="wallet__summary-label">S·ªë d∆∞ hi·ªán t·∫°i</div>
                <div class="wallet__summary-amount" id="walletAmount">0‚Ç´</div>
              </div>
              <div class="wallet__summary-actions">
                <a class="btn btn--primary" href="#tab=wallet" data-wallet-jump="#walletDeposit">N·∫°p ti·ªÅn</a>
                <a class="btn btn--ghost" href="#tab=wallet" data-wallet-jump="#walletWithdraw">R√∫t ti·ªÅn</a>
              </div>
            </div>
          </section>

          <!-- L∆∞·ªõi 2 c·ªôt: N·∫°p / R√∫t -->
          <section class="wallet__grid">

            <!-- N·∫†P TI·ªÄN -->
            <div class="wallet__card card is-hidden" id="walletDeposit">
              <h3 class="wallet__title"><i class="fa-solid fa-circle-plus"></i> N·∫°p ti·ªÅn</h3>

              <form id="formDeposit" class="wallet__form" autocomplete="off">
                <label class="form__label" for="depAmount">S·ªë ti·ªÅn</label>
                <div class="form__row">
                  <input type="number" id="depAmount" class="input" min="10000" step="1000" placeholder="nh·∫≠p ‚â• 10.000" required />
                  <span class="input__suffix">‚Ç´</span>
                </div>

                <div class="quick-amounts">
                  <button type="button" class="chip" data-amount="50000">+50K</button>
                  <button type="button" class="chip" data-amount="100000">+100K</button>
                  <button type="button" class="chip" data-amount="200000">+200K</button>
                </div>

                <label class="form__label" for="depNote">Ghi ch√∫ (tu·ª≥ ch·ªçn)</label>
                <input type="text" id="depNote" class="input" placeholder="V√≠ d·ª•: n·∫°p kho√° L√Ω 10" />

                <div class="form__actions">
                  <button type="submit" class="btn btn--primary">
                    <i class="fa-solid fa-paper-plane"></i> X√°c nh·∫≠n n·∫°p
                  </button>
                </div>
                <p class="form__hint">* M√¥ ph·ªèng offline. K·∫øt n·ªëi c·ªïng thanh to√°n/Firestore s·∫Ω b·ªï sung sau.</p>
              </form>
            </div>

            <!-- R√öT TI·ªÄN -->
            <div class="wallet__card card is-hidden" id="walletWithdraw">
              <h3 class="wallet__title"><i class="fa-solid fa-circle-minus"></i> R√∫t ti·ªÅn</h3>

              <form id="formWithdraw" class="wallet__form" autocomplete="off">
                <label class="form__label" for="wdAmount">S·ªë ti·ªÅn</label>
                <div class="form__row">
                  <input type="number" id="wdAmount" class="input" min="20000" step="1000" placeholder="nh·∫≠p ‚â• 20.000" required />
                  <span class="input__suffix">‚Ç´</span>
                </div>

                <label class="form__label" for="wdMethod">Ph∆∞∆°ng th·ª©c</label>
                <select id="wdMethod" class="input">
                  <option value="bank">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                  <option value="momo">Momo</option>
                  <option value="zalopay">ZaloPay</option>
                </select>

                <div class="form__row">
                  <input type="text" id="wdTarget" class="input" placeholder="S·ªë t√†i kho·∫£n / SƒêT v√≠" required />
                </div>

                <div class="form__actions">
                  <button type="submit" class="btn btn--danger">
                    <i class="fa-solid fa-money-bill-transfer"></i> X√°c nh·∫≠n r√∫t
                  </button>
                </div>
                <p class="form__hint">* M√¥ ph·ªèng offline. Khi n·ªëi Firestore: s·∫Ω t·∫°o y√™u c·∫ßu r√∫t & duy·ªát.</p>
              </form>
            </div>

          </section>

          <!-- L·ªãch s·ª≠ giao d·ªãch -->
          <section class="wallet__history card">
            <div class="wallet__history-head">
              <h3 class="wallet__title"><i class="fa-solid fa-clock-rotate-left"></i> L·ªãch s·ª≠ giao d·ªãch</h3>
              <button class="btn btn--ghost" id="walletClearHistory"><i class="fa-regular fa-trash-can"></i> Xo√° l·ªãch s·ª≠ c·ª•c b·ªô</button>
            </div>
            <div id="walletHistory" class="wallet__history-list" aria-live="polite">
              <!-- s·∫Ω render b·∫±ng JS -->
            </div>
          </section>
        </div>
      </article>

      <!-- SETTINGS -->
      <article id="tab-settings" class="panel" role="tabpanel" aria-labelledby="tab-settings" tabindex="0">
        <header class="panel__head">
          <h2>C√†i ƒë·∫∑t</h2>
        </header>
        <div class="settings__grid">
          <label class="switch">
            <input id="toggleDark" type="checkbox">
            <span class="slider"></span>
            <span>Ch·∫ø ƒë·ªô t·ªëi</span>
          </label>
          <label class="switch">
            <input id="toggleTutor" type="checkbox" checked>
            <span class="slider"></span>
            <span>B·∫≠t SmartTutor n·ªïi</span>
          </label>
        </div>
      </article>
    </section>
  </main>

  <!-- SmartTutor FAB -->
  <a href="smarttutor.html" class="fab" id="fabTutor" aria-label="M·ªü SmartTutor">
    <i class="fa-solid fa-robot"></i>
  </a>

  <!-- Scripts -->
  <script type="module" src="js/core/firebase.js"></script>
  <script type="module" src="js/core/boot_header.js"></script>
  <script type="module" src="js/core/menu_toggle.js"></script>
  <script type="module" src="js/modules/dashboard.js"></script>
  <script type="module" src="js/modules/wallet.js"></script>
  <script defer type="module" src="js/modules/user_status.js"></script>

</body>
</html>
