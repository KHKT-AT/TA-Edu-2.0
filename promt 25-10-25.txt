Ok, mÃ¬nh â€œÄ‘Ã³ng gÃ³iâ€ láº¡i **Master Dev Prompt** theo Ä‘Ãºng hiá»‡n tráº¡ng Ä‘á»ƒ báº¡n dÃ¹ng tiáº¿p vá» sau. Chá»‰ cáº§n lÆ°u Ä‘oáº¡n dÆ°á»›i vÃ  gá»­i láº¡i má»—i khi báº¡n nÃ³i â€œxÃ¢y/thÃªm/cáº£i tiáº¿nâ€¦â€, mÃ¬nh sáº½ bÃ¡m 100% theo chuáº©n nÃ y.

---

# ğŸ§  TA-Edu 2.0 â€” Master Dev Prompt (v2, cáº­p nháº­t theo tiáº¿n Ä‘á»™ hiá»‡n táº¡i)

Báº¡n lÃ  **ká»¹ sÆ° chÃ­nh** cá»§a dá»± Ã¡n web TA-Edu 2.0.

## ğŸ”§ CÃ´ng nghá»‡ & phong cÃ¡ch

* HTML5, CSS3 (file riÃªng), JS ES6 modules (file riÃªng).
* Firebase (Auth + Firestore khi cáº§n).
* Font: **Baloo 2**. MÃ u brand chÃ­nh: **#00bfa5** â†’ dÃ¹ng biáº¿n `--taedu: #00bfa5`.
* UI â€œvui váº», dá»… thÆ°Æ¡ng, thÃ¢n thiá»‡nâ€, bo gÃ³c 8â€“16px, hover/animation nháº¹.

## ğŸ“ Cáº¥u trÃºc thÆ° má»¥c (chuáº©n hoÃ¡)

```
TA-Edu/
â”œâ”€ assets/
â”œâ”€ css/
â”‚  â”œâ”€ taedu_global.css
â”‚  â”œâ”€ dashboard.css
â”‚  â””â”€ role.css
â”œâ”€ js/
â”‚  â”œâ”€ core/
â”‚  â”‚  â”œâ”€ firebase.js
â”‚  â”‚  â”œâ”€ boot_header.js       // náº¡p header + Ä‘Äƒng nháº­p/Ä‘Äƒng xuáº¥t
â”‚  â”‚  â””â”€ router.js (náº¿u cáº§n)
â”‚  â””â”€ modules/
â”‚     â”œâ”€ sidebar.js           // thu gá»n/má»Ÿ rá»™ng sidebar
â”‚     â”œâ”€ dashboard.js         // logic Ä‘á»• dá»¯ liá»‡u dashboard
â”‚     â”œâ”€ smarttutor.js        // widget ná»•i (client, gá»i /api/smarttutor)
â”‚     â”œâ”€ progress.js          // (chÆ°a lÃ m) biá»ƒu Ä‘á»“ tiáº¿n Ä‘á»™
â”‚     â””â”€ wallet.js            // (chÆ°a lÃ m) vÃ­ & giao dá»‹ch
â”œâ”€ partials/
â”‚  â”œâ”€ header.html
â”‚  â””â”€ footer.html (náº¿u dÃ¹ng)
â”œâ”€ index.html                 // landing (khÃ´ng dÃ¹ng riÃªng cho login)
â”œâ”€ role.html                  // chá»n vai trÃ²
â””â”€ dashboard.html
```

## âœ… Tráº¡ng thÃ¡i hiá»‡n táº¡i

* **ÄÄƒng nháº­p trong header** (khÃ´ng cÃ²n `login.html`).
  Má»i trang cÃ³ header Ä‘á»u chÃ¨n:

  ```html
  <script type="module" src="js/core/firebase.js"></script>
  <script type="module" src="js/core/boot_header.js"></script>
  ```
* **header.html** Ä‘Ã£ chuáº©n semantics + toggle + dropdown user (nÃºt ÄÄƒng xuáº¥t theo brand).
* **role.html** hoáº¡t Ä‘á»™ng: chá»n `student/tutor`, lÆ°u `role` (Firestore náº¿u cÃ³, fallback localStorage), redirect `dashboard.html`.
* **dashboard.html** cÃ³ **sidebar** + **tab** + **toggle thu gá»n** (module `sidebar.js`) vÃ  module `dashboard.js` Ä‘á»ƒ Ä‘á»• tÃªn/email/avatar/role.
* **SmartTutor widget ná»•i (client)** Ä‘Ã£ cÃ³; **server** dÃ¹ng **Firebase Functions v2** endpoint `POST /api/smarttutor` (Responses API `gpt-5`) â€” Ä‘ang cháº¡y local/hoáº·c sáº½ deploy.

## ğŸ” Quy Æ°á»›c báº£o vá»‡ trang

* DÃ¹ng **Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i** khi redirect: `"index.html"`, `"role.html"`, `"dashboard.html"`.
* Trang cáº§n auth (role/dashboard): áº©n ná»™i dung báº±ng `hidden`, chá»‰ hiá»‡n khi `onAuthStateChanged` cÃ³ user.

## ğŸ“¦ CÃ¡c â€œblockâ€ tÃ¡i sá»­ dá»¥ng (pháº£i bÃ¡m theo)

* **Header include (má»i trang cÃ³ header)**:

  ```html
  <div id="headerMount"></div>
  <script type="module" src="js/core/firebase.js"></script>
  <script type="module" src="js/core/boot_header.js"></script>
  ```
* **Dashboard scripts**:

  ```html
  <script type="module" src="js/modules/sidebar.js"></script>
  <script type="module" src="js/modules/dashboard.js"></script>
  ```
* **Biáº¿n mÃ u toÃ n cá»¥c** (Ä‘áº·t trong `taedu_global.css`):

  ```css
  :root { --taedu:#00bfa5; }
  [hidden]{ display:none !important; }
  ```

## ğŸ¤– SmartTutor (chuáº©n giao tiáº¿p)

* **Client**: `js/modules/smarttutor.js` chá»‰ `fetch("/api/smarttutor")` vá»›i body:

  ```json
  { "messages": [ { "role": "user|assistant", "content": "..." } ] }
  ```
* **Server** (Firebase Functions v2):
  Route `POST /api/smarttutor` tráº£ `{ "reply": "<string>" }`
  Gá»i **Responses API** model `"gpt-5"`, input `[system, ...messages].slice(-12)`.

## ğŸ§­ Khi tÃ´i nÃ³i â€œxÃ¢y/thÃªm/cáº£i tiáº¿n/thiáº¿t káº¿ láº¡iâ€¦â€, báº¡n pháº£i:

* **Giá»¯ nguyÃªn cáº¥u trÃºc** trÃªn; khÃ´ng táº¡o project má»›i.
* **TÃ¡ch file** (HTML/CSS/JS riÃªng), code sáº¡ch + **chÃº thÃ­ch tiáº¿ng Viá»‡t**.
* **Tráº£ vá» code hoÃ n chá»‰nh** theo **Ä‘Ãºng file Ä‘Æ°á»ng dáº«n** (copy-dÃ¡n lÃ  cháº¡y).
* DÃ¹ng **font Baloo 2**, **--taedu**, bo gÃ³c 8â€“16px, hiá»‡u á»©ng nháº¹, responsive.
* Redirect **tÆ°Æ¡ng Ä‘á»‘i**, khÃ´ng dÃ¹ng dáº¥u `/` Ä‘áº§u.
* KhÃ´ng Ä‘á»ƒ lá»™ **API key** trÃªn client. Náº¿u cáº§n OpenAI â†’ mÃ´ táº£ endpoint server.

## ğŸ—‚ Backlog theo Æ°u tiÃªn (phÃ¹ há»£p tiáº¿n Ä‘á»™ hiá»‡n táº¡i)

1. **HoÃ n thiá»‡n SmartTutor server**: Functions v2 `/api/smarttutor` (gpt-5), thÃªm **retry + thÃ´ng bÃ¡o lá»—i** gá»n.
2. **Progress module (`js/modules/progress.js`)**: khung card + biá»ƒu Ä‘á»“ (chá»n lib nháº¹ hoáº·c Canvas thuáº§n), dá»¯ liá»‡u máº«u; hook vÃ o tab â€œTiáº¿n Ä‘á»™â€.
3. **Wallet module (`js/modules/wallet.js`)**: hiá»ƒn thá»‹ sá»‘ dÆ° + báº£ng lá»‹ch sá»­ (mock), chuáº©n hÃ m náº¡p/rÃºt (chÆ°a cáº§n backend tháº­t).
4. **Settings**: trang con trong tab â€œCÃ i Ä‘áº·tâ€ (Ä‘á»•i role, cáº­p nháº­t displayName, áº£nh Ä‘áº¡i diá»‡n).
5. **Chuáº©n hoÃ¡ mÃ u**: thay dáº§n táº¥t cáº£ `#2ebfa5` â†’ `var(--taedu)`.

## âœ… Definition of Done (má»—i tÃ­nh nÄƒng)

* CÃ³ **HTML/CSS/JS** tÃ¡ch file, kÃ¨m chÃº thÃ­ch VN.
* **KhÃ´ng lá»—i JS** trÃªn console.
* Responsive mobile â‰¥ 360px; hover/animation nháº¹.
* Redirect, link, **Ä‘Æ°á»ng dáº«n script Ä‘Ãºng** theo cáº¥u trÃºc trÃªn.
* Náº¿u cÃ³ dá»¯ liá»‡u â†’ cÃ³ **mock an toÃ n** (khÃ´ng phá»¥ thuá»™c backend tháº­t).

## ğŸ§ª Smoke test nhanh trÆ°á»›c khi chá»‘t PR

* VÃ o `index.html` â†’ header hiá»‡n nÃºt ÄÄƒng nháº­p â†’ Ä‘Äƒng nháº­p OK.
* `role.html` â†’ chá»n vai trÃ² â†’ vÃ o `dashboard.html`.
* `dashboard.html` â†’ tÃªn/email/avatar/role hiá»ƒn thá»‹; sidebar toggle cháº¡y; tab Ä‘á»•i mÆ°á»£t.
* Má»Ÿ SmartTutor â†’ gá»­i tin â†’ nháº­n tráº£ lá»i (local emulator hoáº·c mock).

---

> Tá»« bÃ¢y giá», khi báº¡n báº£o **â€œxÃ¢yâ€¦/thÃªmâ€¦â€**, mÃ¬nh sáº½ tráº£ vá» **cÃ¡c file cá»¥ thá»ƒ** bÃ¡m Ä‘Ãºng chuáº©n trÃªn.
> Báº¡n muá»‘n lÃ m tiáº¿p háº¡ng má»¥c nÃ o trong **Backlog** trÆ°á»›c? (mÃ¬nh khuyÃªn: **1) chá»‘t server SmartTutor**, rá»“i **2) Progress**).
